<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Concepts &mdash; ochonetes 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ochonetes 1.0 documentation" href="index.html" />
    <link rel="prev" title="Overview" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="Overview"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ochonetes 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="concepts">
<h1>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h1>
<div class="section" id="i-o-with-the-proxy">
<h2>I/O with the proxy<a class="headerlink" href="#i-o-with-the-proxy" title="Permalink to this headline">¶</a></h2>
<p>The <em>portal</em> application runs a <a class="reference external" href="http://flask.pocoo.org/">Flask</a> endpoint listening on TCP 9000. It listens for shell requests and runs them
in a temporary directory.</p>
<p>You can access the <em>portal</em> from the outside world by simply CURLing commands with a <strong>POST /shell</strong>. The shell
snippet is passed via the <strong>X-Shell</strong> header. You can for instance run the <em>ls</em> tool:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>$ curl -X POST -H &quot;X-Shell: ls&quot; http://&lt;IP&gt;:9000/shell
{&quot;ok&quot;: true, &quot;ms&quot;: 463, &quot;out&quot;: &quot;\n1 pods, 100% running -&gt;\n - default.ocho-proxy #1\n&quot;}
</pre></div>
</div>
<p>You can upload files as well (for instance when deploying clusters). The files will land in the temporary directory
and be wiped out as soon as the tool completes. Just use a regular multi-part upload, for instance:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>$ curl -X POST -H &quot;X-Shell: deploy redis -p 3&quot; -F &quot;redis=@redis.yml&quot; http://&lt;IP&gt;:9000/shell
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Local directories will also be uploaded as TAR/GZIP archives.</p>
</div>
<p>The response is a serialized JSON object featuring the raw stdout dump of whatever tool you ran. It is thus quite
trivial to build a shallow CLI front-end on your end to interact with the remote shell. Any failure will set the <em>ok</em>
boolean to false (e.g non-zero exit code from the tool process).</p>
</div>
<div class="section" id="sha1-hmac-challenges">
<h2>SHA1-HMAC challenges<a class="headerlink" href="#sha1-hmac-challenges" title="Permalink to this headline">¶</a></h2>
<p>The proxy supports an optional security check. If a secret token is specified when deploying the container any REST
call to the proxy will have to incude a <strong>X-Signature</strong> header set to the SHA1 digest of the command line. Not setting
this header or setting it to something incorrect will result in a failure.</p>
<div class="code bash highlight-python"><div class="highlight"><pre>$ curl -X POST -H &quot;X-Shell: ls&quot; -H &quot;X-Signature: sha1=dha3jf861hbs781&quot; http://&lt;IP&gt;:9000/shell
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/autodesk-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Concepts</a><ul>
<li><a class="reference internal" href="#i-o-with-the-proxy">I/O with the proxy</a></li>
<li><a class="reference internal" href="#sha1-hmac-challenges">SHA1-HMAC challenges</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Overview</a></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2015, Autodesk.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  
  </body>
</html>